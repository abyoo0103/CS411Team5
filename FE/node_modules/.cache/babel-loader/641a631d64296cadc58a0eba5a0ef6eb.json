{"ast":null,"code":"import _classCallCheck from\"/home/jakeja2/CS411Team5/FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jakeja2/CS411Team5/FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/jakeja2/CS411Team5/FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jakeja2/CS411Team5/FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import{Link}from'react-router-dom';import{CSSTransition}from'react-transition-group';import{actionCreators}from'./store';import{actionCreators as loginActionCreators}from'../../pages/login/store';import{HeaderWrapper,Logo,Nav,NavItem,SearchWrapper,NavSearch,SearchInfo,SearchInfoTitle,SearchInfoSwitch,SearchInfoList,SearchInfoItem,Addition,Button}from'./style';var Header=/*#__PURE__*/function(_Component){_inherits(Header,_Component);var _super=_createSuper(Header);function Header(){_classCallCheck(this,Header);return _super.apply(this,arguments);}_createClass(Header,[{key:\"getListArea\",value:function getListArea(){var _this=this;var _this$props=this.props,focused=_this$props.focused,list=_this$props.list,page=_this$props.page,totalPage=_this$props.totalPage,mouseIn=_this$props.mouseIn,handleMouseEnter=_this$props.handleMouseEnter,handleMouseLeave=_this$props.handleMouseLeave,handleChangePage=_this$props.handleChangePage;var newList=list.toJS();var pageList=[];if(newList.length){for(var i=(page-1)*10;i<page*10;i++){pageList.push(/*#__PURE__*/React.createElement(SearchInfoItem,{key:newList[i]},newList[i]));}}if(focused||mouseIn){return/*#__PURE__*/React.createElement(SearchInfo,{onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave},/*#__PURE__*/React.createElement(SearchInfoTitle,null,\"Searching\",/*#__PURE__*/React.createElement(SearchInfoSwitch,{onClick:function onClick(){return handleChangePage(page,totalPage,_this.spinIcon);}},/*#__PURE__*/React.createElement(\"i\",{ref:function ref(icon){_this.spinIcon=icon;},className:\"iconfont spin\"},\"\\uE851\"),\"Change\")),/*#__PURE__*/React.createElement(SearchInfoList,null,pageList));}else{return null;}}},{key:\"render\",value:function render(){var _this$props2=this.props,focused=_this$props2.focused,handleInputFocus=_this$props2.handleInputFocus,handleInputBlur=_this$props2.handleInputBlur,list=_this$props2.list,login=_this$props2.login,logout=_this$props2.logout;return/*#__PURE__*/React.createElement(HeaderWrapper,null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(Logo,null)),/*#__PURE__*/React.createElement(Nav,null,/*#__PURE__*/React.createElement(NavItem,{className:\"left active\"},\"Home\"),/*#__PURE__*/React.createElement(NavItem,{className:\"left\"},\"App\"),login?/*#__PURE__*/React.createElement(NavItem,{onClick:logout,className:\"right\"},\"Logout\"):/*#__PURE__*/React.createElement(Link,{to:\"/login\"},/*#__PURE__*/React.createElement(NavItem,{className:\"right\"},\"Login\")),/*#__PURE__*/React.createElement(NavItem,{className:\"right\"},/*#__PURE__*/React.createElement(\"i\",{className:\"iconfont\"},\"\\uE636\")),/*#__PURE__*/React.createElement(SearchWrapper,null,/*#__PURE__*/React.createElement(CSSTransition,{in:focused,timeout:200,classNames:\"slide\"},/*#__PURE__*/React.createElement(NavSearch,{className:focused?'focused':'',onFocus:function onFocus(){return handleInputFocus(list);},onBlur:handleInputBlur})),/*#__PURE__*/React.createElement(\"i\",{className:focused?'focused iconfont zoom':'iconfont zoom'},\"\\uE614\"),this.getListArea())),/*#__PURE__*/React.createElement(Addition,null,/*#__PURE__*/React.createElement(Link,{to:\"/write\"},/*#__PURE__*/React.createElement(Button,{className:\"writting\"},/*#__PURE__*/React.createElement(\"i\",{className:\"iconfont\"},\"\\uE615\"),\"Profile\")),/*#__PURE__*/React.createElement(Link,{to:\"/register\"},/*#__PURE__*/React.createElement(Button,{className:\"reg\"},\"Register\"))));}}]);return Header;}(Component);var mapStateToProps=function mapStateToProps(state){return{focused:state.getIn(['header','focused']),list:state.getIn(['header','list']),page:state.getIn(['header','page']),totalPage:state.getIn(['header','totalPage']),mouseIn:state.getIn(['header','mouseIn']),login:state.getIn(['login','login'])};};var mapDispathToProps=function mapDispathToProps(dispatch){return{handleInputFocus:function handleInputFocus(list){list.size===0&&dispatch(actionCreators.getList());dispatch(actionCreators.searchFocus());},handleInputBlur:function handleInputBlur(){dispatch(actionCreators.searchBlur());},handleMouseEnter:function handleMouseEnter(){dispatch(actionCreators.mouseEnter());},handleMouseLeave:function handleMouseLeave(){dispatch(actionCreators.mouseLeave());},handleChangePage:function handleChangePage(page,totalPage,spin){var originAngle=spin.style.transform.replace(/[^0-9]/ig,'');if(originAngle){originAngle=parseInt(originAngle,10);}else{originAngle=0;}spin.style.transform='rotate('+(originAngle+360)+'deg)';if(page<totalPage){dispatch(actionCreators.changePage(page+1));}else{dispatch(actionCreators.changePage(1));}},logout:function logout(){dispatch(loginActionCreators.logout());}};};export default connect(mapStateToProps,mapDispathToProps)(Header);","map":{"version":3,"sources":["/home/jakeja2/CS411Team5/FE/src/common/header/index.js"],"names":["React","Component","connect","Link","CSSTransition","actionCreators","loginActionCreators","HeaderWrapper","Logo","Nav","NavItem","SearchWrapper","NavSearch","SearchInfo","SearchInfoTitle","SearchInfoSwitch","SearchInfoList","SearchInfoItem","Addition","Button","Header","props","focused","list","page","totalPage","mouseIn","handleMouseEnter","handleMouseLeave","handleChangePage","newList","toJS","pageList","length","i","push","spinIcon","icon","handleInputFocus","handleInputBlur","login","logout","getListArea","mapStateToProps","state","getIn","mapDispathToProps","dispatch","size","getList","searchFocus","searchBlur","mouseEnter","mouseLeave","spin","originAngle","style","transform","replace","parseInt","changePage"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { CSSTransition } from 'react-transition-group';\nimport { actionCreators } from './store';\nimport { actionCreators as loginActionCreators } from '../../pages/login/store'\nimport {\n\tHeaderWrapper,\n\tLogo,\n\tNav,\n\tNavItem,\n\tSearchWrapper,\n\tNavSearch,\n\tSearchInfo,\n\tSearchInfoTitle,\n\tSearchInfoSwitch,\n\tSearchInfoList,\n\tSearchInfoItem,\n\tAddition,\n\tButton\n} from './style';\n\nclass Header extends Component {\n\n\tgetListArea() {\n\t\tconst { focused, list, page, totalPage, mouseIn, handleMouseEnter, handleMouseLeave, handleChangePage } = this.props;\n\t\tconst newList = list.toJS();\n\t\tconst pageList = [];\n\n\t\tif (newList.length) {\n\t\t\tfor (let i = (page - 1) * 10; i < page * 10; i++) {\n\t\t\t\tpageList.push(\n\t\t\t\t\t<SearchInfoItem key={newList[i]}>{newList[i]}</SearchInfoItem>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\tif (focused || mouseIn) {\n\t\t\treturn (\n\t\t\t\t<SearchInfo \n\t\t\t\t\tonMouseEnter={handleMouseEnter}\n\t\t\t\t\tonMouseLeave={handleMouseLeave}\n\t\t\t\t>\n\t\t\t\t\t<SearchInfoTitle>\n\t\t\t\t\t\tSearching\n\t\t\t\t\t\t<SearchInfoSwitch \n\t\t\t\t\t\t\tonClick={() => handleChangePage(page, totalPage, this.spinIcon)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i ref={(icon) => {this.spinIcon = icon}} className=\"iconfont spin\">&#xe851;</i>\n\t\t\t\t\t\t\tChange\n\t\t\t\t\t\t</SearchInfoSwitch>\n\t\t\t\t\t</SearchInfoTitle>\n\t\t\t\t\t<SearchInfoList>\n\t\t\t\t\t\t{pageList}\n\t\t\t\t\t</SearchInfoList>\n\t\t\t\t</SearchInfo>\n\t\t\t)\n\t\t}else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { focused, handleInputFocus, handleInputBlur, list, login, logout } = this.props;\n\t\treturn (\n\t\t\t<HeaderWrapper>\n\t\t\t\t<Link to='/'>\n\t\t\t\t\t<Logo/>\n\t\t\t\t</Link>\n\t\t\t\t<Nav>\n\t\t\t\t\t<NavItem className='left active'>Home</NavItem>\n\t\t\t\t\t<NavItem className='left'>App</NavItem>\n\t\t\t\t\t{\n\t\t\t\t\t\tlogin ? \n\t\t\t\t\t\t\t<NavItem onClick={logout} className='right'>Logout</NavItem> : \n\t\t\t\t\t\t\t<Link to='/login'><NavItem className='right'>Login</NavItem></Link>\n\t\t\t\t\t}\n\t\t\t\t\t<NavItem className='right'>\n\t\t\t\t\t\t<i className=\"iconfont\">&#xe636;</i>\n\t\t\t\t\t</NavItem>\n\t\t\t\t\t<SearchWrapper>\n\t\t\t\t\t\t<CSSTransition\n\t\t\t\t\t\t\tin={focused}\n\t\t\t\t\t\t\ttimeout={200}\n\t\t\t\t\t\t\tclassNames=\"slide\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<NavSearch\n\t\t\t\t\t\t\t\tclassName={focused ? 'focused': ''}\n\t\t\t\t\t\t\t\tonFocus={() => handleInputFocus(list)}\n\t\t\t\t\t\t\t\tonBlur={handleInputBlur}\n\t\t\t\t\t\t\t></NavSearch>\n\t\t\t\t\t\t</CSSTransition>\n\t\t\t\t\t\t<i className={focused ? 'focused iconfont zoom': 'iconfont zoom'}>\n\t\t\t\t\t\t\t&#xe614;\n\t\t\t\t\t\t</i>\n\t\t\t\t\t\t{this.getListArea()}\n\t\t\t\t\t</SearchWrapper>\n\t\t\t\t</Nav>\n\t\t\t\t<Addition>\n\t\t\t\t\t<Link to='/write'>\n\t\t\t\t\t\t<Button className='writting'>\n\t\t\t\t\t\t\t<i className=\"iconfont\">&#xe615;</i>\n\t\t\t\t\t\t\tProfile\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Link>\n          <Link to='/register'>\n\t\t\t\t\t<Button className='reg'>Register</Button>\n          </Link>\n\t\t\t\t</Addition>\n\t\t\t</HeaderWrapper>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tfocused: state.getIn(['header', 'focused']),\n\t\tlist: state.getIn(['header', 'list']),\n\t\tpage: state.getIn(['header', 'page']),\n\t\ttotalPage: state.getIn(['header', 'totalPage']),\n\t\tmouseIn: state.getIn(['header', 'mouseIn']),\n\t\tlogin: state.getIn(['login', 'login'])\n\t}\n}\n\nconst mapDispathToProps = (dispatch) => {\n\treturn {\n\t\thandleInputFocus(list) {\n\t\t\t(list.size === 0) && dispatch(actionCreators.getList());\n\t\t\tdispatch(actionCreators.searchFocus());\n\t\t},\n\t\thandleInputBlur() {\n\t\t\tdispatch(actionCreators.searchBlur());\n\t\t},\n\t\thandleMouseEnter() {\n\t\t\tdispatch(actionCreators.mouseEnter());\n\t\t},\n\t\thandleMouseLeave() {\n\t\t\tdispatch(actionCreators.mouseLeave());\n\t\t},\n\t\thandleChangePage(page, totalPage, spin) {\n\t\t\tlet originAngle = spin.style.transform.replace(/[^0-9]/ig, '');\n\t\t\tif (originAngle) {\n\t\t\t\toriginAngle = parseInt(originAngle, 10);\n\t\t\t}else {\n\t\t\t\toriginAngle = 0;\n\t\t\t}\n\t\t\tspin.style.transform = 'rotate(' + (originAngle + 360) + 'deg)';\n\n\t\t\tif (page < totalPage) {\n\t\t\t\tdispatch(actionCreators.changePage(page + 1));\n\t\t\t}else {\n\t\t\t\tdispatch(actionCreators.changePage(1));\n\t\t\t}\n\t\t},\n\t\tlogout() {\n\t\t\tdispatch(loginActionCreators.logout())\n\t\t}\n\t}\n}\n\nexport default connect(mapStateToProps, mapDispathToProps)(Header);\n"]},"metadata":{},"sourceType":"module"}