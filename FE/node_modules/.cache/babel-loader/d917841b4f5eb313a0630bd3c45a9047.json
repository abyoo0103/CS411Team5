{"ast":null,"code":"import \"antd/lib/empty/style\";\nimport _Empty from \"antd/lib/empty\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/avatar/style\";\nimport _Avatar from \"antd/lib/avatar\";\nvar _jsxFileName = \"C:\\\\Users\\\\Alejandro\\\\Documents\\\\GitHub\\\\CS411Team5\\\\FE\\\\src\\\\pages\\\\Result\\\\index.jsx\";\nimport React, { Component } from 'react';\nimport TopBar from '@/components/TopBar';\nimport styles from './index.less';\nimport articles from './articles';\nimport Axios from '@/http/';\n\nconst imgUrl = require('../../assets/images/img.jpg');\n\nclass Result extends Component {\n  constructor() {\n    super();\n\n    this.getResult = keyWords => {\n      Axios.get('search', {\n        params: {\n          keyWords\n        }\n      }).then(res => {\n        this.setState({\n          result: res.data\n        });\n      });\n    };\n\n    this.toDetail = id => {\n      this.props.history.push(`/detail/${id}`);\n    };\n\n    this.article = article => {\n      const commentUrl = require('../../assets/icons/icon_comment.png');\n\n      const likeUrl = require('../../assets/icons/icon_like.png');\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.article,\n        key: article.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.articleContent,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.articleTitle,\n        onClick: () => this.toDetail(article.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }\n      }, article.title), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.articleText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }\n      }, article.content), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.articleData,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: commentUrl,\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 15\n        }\n      }, article.comment)), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: likeUrl,\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 15\n        }\n      }, article.like)))), /*#__PURE__*/React.createElement(\"img\", {\n        className: styles.articleImg,\n        src: imgUrl,\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 9\n        }\n      }));\n    };\n\n    this.changeAttentionStatus = index => {\n      if (window.$isLogin) {\n        const {\n          authors\n        } = this.state;\n        authors[index].isAttention = !authors[index].isAttention;\n        this.setState({\n          authors\n        });\n      } else {\n        this.topBarRef.sign(1);\n      }\n    };\n\n    this.author = (author, index) => {\n      return /*#__PURE__*/React.createElement(_Row, {\n        justify: \"space-between\",\n        align: \"middle\",\n        className: styles.author,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(_Col, {\n        flex: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(_Row, {\n        align: \"middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(_Col, {\n        span: 5,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(_Avatar, {\n        size: 32,\n        src: imgUrl,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(_Col, {\n        style: {\n          cursor: 'pointer'\n        },\n        onClick: () => this.props.history.push('/author/' + author.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.authorName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 15\n        }\n      }, author.name), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.authorData,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 15\n        }\n      }, author.words, \"KWords | \", author.stars, \"KStars\")))), /*#__PURE__*/React.createElement(_Col, {\n        span: 7,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(_Button, {\n        type: \"link\",\n        style: author.isAttention ? {\n          color: 'green'\n        } : {},\n        onClick: () => this.changeAttentionStatus(index),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }\n      }, !author.isAttention ? '+Attention' : 'Focused', ' ')));\n    };\n\n    this.state = {\n      // articles: articles, //文章列表\n      authors: [{\n        id: 31321,\n        name: '的好',\n        words: 14545,\n        stars: 564,\n        isAttention: false\n      }, {\n        id: 31321,\n        name: 'dsad',\n        words: 14545,\n        stars: 564,\n        isAttention: false\n      }, {\n        id: 31321,\n        name: 'vsv',\n        words: 14545,\n        stars: 564,\n        isAttention: false\n      }, {\n        id: 31321,\n        name: 'prof',\n        words: 14545,\n        stars: 564,\n        isAttention: false\n      }, {\n        id: 31321,\n        name: 'John',\n        words: 14545,\n        stars: 564,\n        isAttention: false\n      }],\n      //作者列表\n      browsingHistory: [1, 1, 1, 1, 1, 1, 1],\n      //浏览记录列表,\n      //result of searching,could be array or object, it's up to backend\n      result: [] //搜索结果 数据类型取决于后端api，可以是数组，可以是对象\n\n    };\n  }\n\n  componentDidMount() {\n    const keyWords = this.props.location.search && this.props.location.search.split('=')[1]; // console.log(this);\n\n    this.getResult(keyWords);\n  }\n  /**\r\n   * 获取搜索结果\r\n   * get searching result\r\n   */\n\n\n  render() {\n    const {\n      articles,\n      authors,\n      browsingHistory,\n      result\n    } = this.state; // const isResult = this.props.match.path.includes('result') ? true : false;\n\n    const isLogin = window.$isLogin;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.wrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(TopBar, {\n      wrappedComponentRef: c => {\n        this.topBarRef = c;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.containerLeft,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }\n    }, result.length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 15\n      }\n    }, result.map(article => this.article(article)), /*#__PURE__*/React.createElement(_Button, {\n      className: styles.more,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }, \"Read More\")) : /*#__PURE__*/React.createElement(_Empty, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.containerRight,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(_Row, {\n      justify: \"space-between\",\n      align: \"middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(_Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }, \"Recommend Authors\")), /*#__PURE__*/React.createElement(_Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(_Button, {\n      type: \"link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    }, \"Change\"))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }\n    }, authors && authors.map((author, index) => this.author(author, index))), /*#__PURE__*/React.createElement(_Button, {\n      type: \"default\",\n      className: styles.all,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }\n    }, \"Looking All\"), isLogin && /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(_Row, {\n      justify: \"space-between\",\n      align: \"middle\",\n      style: {\n        marginTop: '40px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 21\n      }\n    }, \"Browsing History\"))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }\n    }, browsingHistory && //这里应该用浏览记录的列表\n    browsingHistory.map(history => /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.history,\n      onClick: () => this.props.history.push('/detail/67'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 23\n      }\n    }, \"\\u90FD\\u53D1\\u7ED9\\u8FD8\\u662F\\u9152\\u5E97\\u72C2\\u6B22\\u8282\\u72C2\\u6B22\\u8282\"))), /*#__PURE__*/React.createElement(_Button, {\n      type: \"default\",\n      className: styles.all,\n      style: {\n        marginTop: '16px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }\n    }, \"Looking All\")))));\n  }\n\n}\n\nexport default Result;","map":{"version":3,"sources":["C:/Users/Alejandro/Documents/GitHub/CS411Team5/FE/src/pages/Result/index.jsx"],"names":["React","Component","TopBar","styles","articles","Axios","imgUrl","require","Result","constructor","getResult","keyWords","get","params","then","res","setState","result","data","toDetail","id","props","history","push","article","commentUrl","likeUrl","articleContent","articleTitle","title","articleText","content","articleData","comment","like","articleImg","changeAttentionStatus","index","window","$isLogin","authors","state","isAttention","topBarRef","sign","author","cursor","authorName","name","authorData","words","stars","color","browsingHistory","componentDidMount","location","search","split","render","isLogin","wrapper","c","container","containerLeft","length","map","more","containerRight","all","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport TopBar from '@/components/TopBar';\r\nimport styles from './index.less';\r\nimport articles from './articles';\r\nimport { Button, Row, Col, Avatar, Empty } from 'antd';\r\nimport Axios from '@/http/';\r\n\r\nconst imgUrl = require('../../assets/images/img.jpg');\r\n\r\nclass Result extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      // articles: articles, //文章列表\r\n      authors: [\r\n        {\r\n          id: 31321,\r\n          name: '的好',\r\n          words: 14545,\r\n          stars: 564,\r\n          isAttention: false,\r\n        },\r\n        {\r\n          id: 31321,\r\n          name: 'dsad',\r\n          words: 14545,\r\n          stars: 564,\r\n          isAttention: false,\r\n        },\r\n        {\r\n          id: 31321,\r\n          name: 'vsv',\r\n          words: 14545,\r\n          stars: 564,\r\n          isAttention: false,\r\n        },\r\n        {\r\n          id: 31321,\r\n          name: 'prof',\r\n          words: 14545,\r\n          stars: 564,\r\n          isAttention: false,\r\n        },\r\n        {\r\n          id: 31321,\r\n          name: 'John',\r\n          words: 14545,\r\n          stars: 564,\r\n          isAttention: false,\r\n        },\r\n      ], //作者列表\r\n      browsingHistory: [1, 1, 1, 1, 1, 1, 1], //浏览记录列表,\r\n      //result of searching,could be array or object, it's up to backend\r\n      result: [], //搜索结果 数据类型取决于后端api，可以是数组，可以是对象\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const keyWords = this.props.location.search && this.props.location.search.split('=')[1];\r\n    // console.log(this);\r\n    this.getResult(keyWords);\r\n  }\r\n\r\n  /**\r\n   * 获取搜索结果\r\n   * get searching result\r\n   */\r\n  getResult = keyWords => {\r\n    Axios.get('search', {\r\n      params: {\r\n        keyWords,\r\n      },\r\n    }).then(res => {\r\n      this.setState({\r\n        result: res.data,\r\n      });\r\n    });\r\n  };\r\n\r\n  /**\r\n   * 跳转详情页\r\n   * jump to detail page\r\n   * @param id string 文章id\r\n   */\r\n  toDetail = id => {\r\n    this.props.history.push(`/detail/${id}`);\r\n  };\r\n\r\n  /**\r\n   * 函数式组件，文章组件\r\n   * @param article object 文章详情，\r\n   * 字段为api对应字段，可以修改\r\n   */\r\n  article = article => {\r\n    const commentUrl = require('../../assets/icons/icon_comment.png');\r\n    const likeUrl = require('../../assets/icons/icon_like.png');\r\n    return (\r\n      <div className={styles.article} key={article.id}>\r\n        <div className={styles.articleContent}>\r\n          <div className={styles.articleTitle} onClick={() => this.toDetail(article.id)}>\r\n            {article.title}\r\n          </div>\r\n          <div className={styles.articleText}>{article.content}</div>\r\n          <div className={styles.articleData}>\r\n            <span>\r\n              <img src={commentUrl} alt=\"\" />\r\n              <span>{article.comment}</span>\r\n            </span>\r\n            <span>\r\n              <img src={likeUrl} alt=\"\" />\r\n              <span>{article.like}</span>\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <img className={styles.articleImg} src={imgUrl} alt=\"\" />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * 修改推荐作者的关注状态\r\n   * change the status of recommended authors\r\n   * @param index number 需要修改的作者在列表的下标\r\n   */\r\n  changeAttentionStatus = index => {\r\n    if (window.$isLogin) {\r\n      const { authors } = this.state;\r\n      authors[index].isAttention = !authors[index].isAttention;\r\n      this.setState({ authors });\r\n    } else {\r\n      this.topBarRef.sign(1);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 函数式组件，作者组件\r\n   * @param author object 作者详情，\r\n   * @param index number 列表对应下标\r\n   * 字段为api对应字段，可以修改\r\n   */\r\n  author = (author, index) => {\r\n    return (\r\n      <Row justify=\"space-between\" align=\"middle\" className={styles.author}>\r\n        <Col flex={1}>\r\n          <Row align=\"middle\">\r\n            <Col span={5}>\r\n              <Avatar size={32} src={imgUrl} />\r\n            </Col>\r\n            <Col\r\n              style={{ cursor: 'pointer' }}\r\n              onClick={() => this.props.history.push('/author/' + author.id)}\r\n            >\r\n              <div className={styles.authorName}>{author.name}</div>\r\n              <div className={styles.authorData}>\r\n                {author.words}KWords | {author.stars}KStars\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </Col>\r\n        <Col span={7}>\r\n          <Button\r\n            type=\"link\"\r\n            style={author.isAttention ? { color: 'green' } : {}}\r\n            onClick={() => this.changeAttentionStatus(index)}\r\n          >\r\n            {!author.isAttention ? '+Attention' : 'Focused'}{' '}\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  render() {\r\n    const { articles, authors, browsingHistory, result } = this.state;\r\n    // const isResult = this.props.match.path.includes('result') ? true : false;\r\n    const isLogin = window.$isLogin;\r\n    return (\r\n      <div className={styles.wrapper}>\r\n        <TopBar\r\n          wrappedComponentRef={c => {\r\n            this.topBarRef = c;\r\n          }}\r\n        />\r\n        <div className={styles.container}>\r\n          <div className={styles.containerLeft}>\r\n            {result.length > 0 ? (\r\n              <React.Fragment>\r\n                {result.map(article => this.article(article))}\r\n                <Button className={styles.more}>Read More</Button>\r\n              </React.Fragment>\r\n            ) : (\r\n              <Empty />\r\n            )}\r\n          </div>\r\n          <div className={styles.containerRight}>\r\n            <Row justify=\"space-between\" align=\"middle\">\r\n              <Col>\r\n                <span>Recommend Authors</span>\r\n              </Col>\r\n              <Col>\r\n                <Button type=\"link\">Change</Button>\r\n              </Col>\r\n            </Row>\r\n            <div>{authors && authors.map((author, index) => this.author(author, index))}</div>\r\n            <Button type=\"default\" className={styles.all}>\r\n              Looking All\r\n            </Button>\r\n            {isLogin && (\r\n              <React.Fragment>\r\n                <Row justify=\"space-between\" align=\"middle\" style={{ marginTop: '40px' }}>\r\n                  <Col>\r\n                    <span>Browsing History</span>\r\n                  </Col>\r\n                </Row>\r\n                <div>\r\n                  {browsingHistory && //这里应该用浏览记录的列表\r\n                    browsingHistory.map(history => (\r\n                      <div\r\n                        className={styles.history}\r\n                        onClick={() => this.props.history.push('/detail/67')}\r\n                      >\r\n                        都发给还是酒店狂欢节狂欢节\r\n                      </div>\r\n                    ))}\r\n                </div>\r\n                <Button type=\"default\" className={styles.all} style={{ marginTop: '16px' }}>\r\n                  Looking All\r\n                </Button>\r\n              </React.Fragment>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Result;\r\n"]},"metadata":{},"sourceType":"module"}